!function(t){function e(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var n=i(1),o=a(n),r=i(2),l=a(r),s=i(4),c=a(s),u=i(6),d=a(u),f=i(7),m=a(f),p=i(3),h=a(p),g=i(5),v=a(g);window.districtmCatfish={},districtmCatfish.utils=l.default,districtmCatfish.global=o.default,districtmCatfish.ssp=m.default,districtmCatfish.collections=h.default,districtmCatfish.capping=v.default,districtmCatfish.capping._set(),districtmCatfish.capping._checkCondition()&&(l.default.checkParent(window),o.default.loc.districtmCatfish=window.districtmCatfish,districtmCatfish.main=new c.default(districtm_catfish_id),districtmCatfish.main.run(),districtmCatfish.send=new d.default,districtmCatfish.send.run())},function(t,e,i){"use strict";function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=(a(n),{loc:"",labels:{fr:{"no-label":"PUB-FR.png",label:"dm-orangeFR.png"},en:{"no-label":"ads-white.png",label:"dm-orange.png"}},lang:"en",ls:!0,protocol:"http://ib",secure:"https://secure",trust:1,psa:0,promo:{},referrer:"",cb:(new Date).getTime()+""+(1e4+Math.floor(9e4*Math.random())),domain:"ron.districtm.ca",pid:"",sid:"",loop:0,main:0,height:"",width:"",position:"atf",begins:"",zone:0,tie_breaker:0,target:"",frame:"",i:0,name:"",where:"",style:{},inImagePos:"",checkif:"",imageCollection:[],checkIm:"",index:0,animation:!0,capping:"",last:[],refresh:"",parent:[],deep:0,setMain:function(){return this.loop-1}});e.default=o},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=a(o),l=i(3),s=a(l),c={d:"",checkParent:function(t){var e=t;e===e.parent?r.default.loc=e:this.checkParent(e.parent)},_execute:function(){for(;this.d!==this.d.parent;)return console.log(this.d!==this.d.parent),this.d=this.d.parent,r.default.loc=this.d,this},generateId:function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},removeLastComma:function(t){var e=t.lastIndexOf(","),i=t.substring(0,e);return i},getTopWindowUrl:function(){try{return window.top.location.href}catch(t){return window.location.href}},timer:function(){return(new Date).getTime()},loadTime:function(t){s.default.update(t.auctionId,{load:t.end-t.start})},logger:function(t){console.log("District M Catfish :",t)},where:function(){},capping:function(){var t={};t.Inc=function(){"undefined"!=typeof localStorage&&localStorage.dmCapping&&(localStorage.dmCapping=numbers(localStorage.dmCapping)+1)},t.perDay=function(){"undefined"!=typeof localStorage.dmDate?Number(localStorage.dmDate)===(new Date).getDate()?t.Inc():localStorage.removeItem("dmDate"):(localStorage.dmDate=(new Date).getDate(),localStorage.removeItem("dmCapping"),t.Inc())},t.perHour=function(){"undefined"!=typeof localStorage.dmHour?Number(localStorage.dmHour)===(new Date).getHours()?this.Inc():localStorage.removeItem("dmHour"):(localStorage.dmHour=(new Date).getHours(),localStorage.removeItem("dmCapping"),this.Inc())},t.display=function(t,e){localStorage.dmCapping<=districtm_capping&&t(e)},t[sc](),t.display(fn,n)}};e.default=c},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=a(n),r={col:{},win:{},register:function(t,e){this.col[t]?o.default.logger(t," already register"):this.col[t]=e},update:function(t,e){if(this.col[t])for(var i in e)this.col[t][i]=e[i];else o.default.logger(t," can't be updated")},select:function(t){return o.default.logger(t),this.col[t.auctionId]},selectById:function(t){return this.col[t]},selectField:function(t,e){return this.col[t][e]||"error"},selectWin:function(){var t={};for(var e in this.col)return""!==this.col[e].winBid&&(t[e]=this.col[e]),t}};e.default=r},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=i(1),l=a(r),s=i(3),c=a(s),u=i(5),d=a(u),f="",m=function(){function t(e){n(this,t),this.size={catfish:{desktop:["728x90","970x90"],mobile:["320x50","300x50"]},side:{desktop:["300x250","160x600","300x600"]},any:{desktop:["728x90","970x90","300x250","160x600","300x600"],mobile:["320x50","300x50"]}},this.anim={bottom:["728x90","970x90"],side:["300x250","300x600","160x600"]},this.setup={bottom:{position:"fixed",width:"100%",bottom:"-250px"},left:{position:"fixed",width:"auto",left:"-300px"}},this.id=e,this.mainDiv=""}return o(t,[{key:"createMainDiv",value:function(){var t=document.createElement("div");return t.id="dmCatfishv2",t.style.zIndex=5e7,this.mainDiv=t,t}},{key:"run",value:function(){console.log("run was called"),console.log(l.default.loc),l.default.loc.document.body.appendChild(this.createMainDiv())}},{key:"build",value:function(t){console.log(c.default.col),console.log(t);for(var e in c.default.col){var i=document.createElement("div");console.log(this.mainDiv);this.size[districtm_catfish_format];"catfish"===districtm_catfish_format?(t.style.position=this.setup.bottom.position,t.style.width=this.setup.bottom.width,t.style.bottom=this.setup.bottom.bottom,i.style.width=c.default.col[e].width,i.style.height=c.default.col[e].height,i.style.margin="auto",i.style.position="relative",f="bottom"):"any"===districtm_catfish_format&&(this.anim.side.indexOf(c.default.col[e].width+"x"+c.default.col[e].height)>-1?(t.style.position=this.setup.left.position,t.style.width=this.setup.left.width,t.style.left=this.setup.left.left,t.style.bottom="0px",i.style.position="relative",f="left"):(t.style.position=this.setup.bottom.position,t.style.width=this.setup.bottom.width,t.style.bottom=this.setup.bottom.bottom,i.style.width=c.default.col[e].width,i.style.height=c.default.col[e].height,i.style.margin="auto",i.style.position="relative",f="bottom")),t.appendChild(i);var a=document.createElement("iframe");a.height=0,a.width=0,a.border="0px",a.hspace="0",a.vspace="0",a.marginWidth="0",a.marginHeight="0",a.scrolling="no",a.frameBorder=0,a.style.width=c.default.col[e].width,a.style.height=c.default.col[e].height,a.style.margin="auto",a.style.display="block",a.src=c.default.col[e].adUrl;var n=this;a.onload=function(){"bottom"===f?n.animationOnBottom():n.animationOnLeft()},i.appendChild(a),i.appendChild(this.addCloseButton(i))}d.default._inc()}},{key:"filter",value:function(t,e){}},{key:"addCloseButton",value:function(t){var e=document.createElement("div");e.style.position="absolute",e.className="dmCatClose",e.style.right="0px",e.style.top="-30px",e.style.opacity="0.9",e.style.height="auto",e.style.backgroundColor="black",e.innerHTML="<img src='//cdn.districtm.ca/catfish/images/"+l.default.labels[window.districtm_catfish_label_lang][districtm_catfish_label_image]+"'>",e.style.color="inherit",e.style.fontSize="12px",e.style.padding="3px",e.style.cursor="pointer";var i=this;return $(e).on("click",function(t){console.log("allo"),"bottom"===f?i.animationOffBottom(90):i.animationOffLeft(300)}),e}},{key:"animationOnBottom",value:function(){$(l.default.loc.document.querySelector("#dmCatfishv2")).animate({bottom:"+0px"},300)}},{key:"animationOffBottom",value:function(t){$(l.default.loc.document.querySelector("#dmCatfishv2")).animate({bottom:"-"+(t+40)+"px"},300)}},{key:"animationOnLeft",value:function(){$(l.default.loc.document.querySelector("#dmCatfishv2")).animate({left:"+0px"},300)}},{key:"animationOffLeft",value:function(t){$(l.default.loc.document.querySelector("#dmCatfishv2")).animate({left:"-"+(t+40)+"px"},300)}}]),t}();e.default=m},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=i(2),l=(a(r),i(1)),s=a(l),c=function(){function t(){n(this,t)}return o(t,[{key:"checkLocalAvailable",value:function(){localStorage?s.default.ls=!0:s.default.ls=!1}},{key:"execute",value:function(){}},{key:"_inc",value:function(){"perHour"===districtm_catfish_freq&&this._setHour(),"perDay"===districtm_catfish_freq&&this._setDay();var t=JSON.parse(localStorage.dmCapping);t.count<t.cap||(t.del=!1),this.save(t)}},{key:"_checkCondition",value:function(){var t=JSON.parse(localStorage.dmCapping);return!("perHour"===t.rel&&!t.del)&&!("perDay"===t.rel&&!t.del)}},{key:"_set",value:function(){this.checkLocalAvailable(),localStorage.dmCapping&&"number"!=typeof JSON.parse(localStorage.dmCapping)||this.save({cap:districtm_catfish_capping,rel:districtm_catfish_freq,count:0,del:!0,current:"perHour"===districtm_catfish_capping?(new Date).getHours():(new Date).getDate()})}},{key:"_setHour",value:function(){var t=JSON.parse(localStorage.dmCapping);t.current!==(new Date).getHours()?(t.current=(new Date).getHours(),t.count=0,t.del=!0):t.count++,this.save(t)}},{key:"_setDay",value:function(){var t=JSON.parse(localStorage.dmCapping);t.current!==(new Date).getDate()?(t.current=(new Date).getDate(),t.del=!0,t.count=0):t.count++,this.save(t)}},{key:"save",value:function(t){localStorage.dmCapping=JSON.stringify(t)}}]),t}();e.default=new c},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=i(7),l=a(r),s=i(4),c=a(s),u=i(1),d=a(u),f=new c.default,m=function(){function t(){n(this,t)}return o(t,[{key:"run",value:function(){var t=d.default.loc.innerWidth||d.default.loc.document.documentElement.clientWidth||d.default.loc.document.body.clientWidth;"fr"===window.districtm_catfish_language?t>728?l.default.appnexus.execute(f.size[districtm_catfish_format].desktop):l.default.appnexus.execute(f.size[districtm_catfish_format].mobile):t>728?l.default.appnexus.execute(f.size[districtm_catfish_format].desktop):l.default.appnexus.execute(f.size[districtm_catfish_format].mobile)}}]),t}();e.default=m},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),o=a(n),r={appnexus:o.default};e.default=r},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var n=i(2),o=a(n),r=i(3),l=a(r),s=i(4),c=a(s),u=i(1),d=a(u),f=new c.default,m={jptCall:function(t){var e="",i=t.sizes[0];if(t.sizes.length>1){e+="promo_sizes=";for(var a=1;a<t.sizes.length;a++)e+=t.sizes[a]+",";e=o.default.removeLastComma(e),e+="&"}var n="http"+("https:"===document.location.protocol?"s://secure.adnxs.com/jpt?":"://ib.adnxs.com/jpt?");return n+="callback=districtmCatfish.ssp.appnexus.handleAppNexusCallback&",n+="callback_uid="+t.auctionId+"&",n+="psa=0&",n+="zone="+t.zone+"&",n+="code=dm-pl-"+t.id+"&",n+="memberId="+t.memberId+"&",n+="member="+t.memberId+"&",n+="size="+i+"&",n+=e,n+="referrer="+o.default.getTopWindowUrl()},getAppNexusBid:function(t,e){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=t;var a=document.getElementsByTagName("head");a=a.length?a:document.getElementsByTagName("body"),l.default.update(e.auctionId,{start:o.default.timer()}),a.length&&(a=a[0],a.insertBefore(i,a.firstChild))},handleAppNexusCallback:function(t){if(t.result&&t.result.cpm&&0!==t.result.cpm){var e,i=t.callback_uid;if(t.result&&t.result.cpm){e=parseInt(t.result.cpm,10),e/=1e4;var a=(t.result.ad,t.result.creative_id,{});a.winBid=parseFloat(e).toFixed(2),a.adUrl=t.result.ad?t.result.ad:"http://districtm.ca",a.trackingUrl="",a.callBackId=i,a.auctionId=i,a.size=t.result.width+"x"+t.result.height,a.width=t.result.width?t.result.width:728,a.height=t.result.height?t.result.height:90,a.ssp="appnexus",a.end=o.default.timer(),l.default.update(a.callBackId,a),o.default.loadTime(l.default.select(a)),a.load=l.default.selectField(a.auctionId,"load"),o.default.logger(a),f.build(d.default.loc.document.querySelector("#dmCatfishv2"))}}},execute:function(t){var e={};e.auctionId=o.default.generateId(30),e.memberId=1908,e.id=window.districtm_catfish_id,e.zone=200,e.sizes=t,l.default.register(e.auctionId,e),this.getAppNexusBid(this.jptCall(e),e)}};t.exports=m}]);